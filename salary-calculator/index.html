<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced Salary Calculator - Tax & Take-Home | UtilityNest</title>
  <meta name="description" content="Based on Indian income tax slabs FY 2025-26. For legal/tax filing, always confirm with CA or official IT tools">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- ‚úÖ GLOBAL COMMON CSS -->
  <link rel="stylesheet" href="/Home/css/style.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #1f2937;
      line-height: 1.6;
      min-height: 100vh;
    }

    
        .section {
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .section h1 {
      font-size: 32px;
      margin-bottom: 15px;
      color: white;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      font-weight: 800;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      border: 1px solid #e5e7eb;
    }

    .card h2 {
      font-size: 20px;
      margin-bottom: 16px;
      color: #1f2937;
      font-weight: 700;
    }

    .gradient-card {
      background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
      border: 2px solid #667eea;
    }

    .tabs {
      display: flex;
      gap: 0;
      border-bottom: 3px solid #e5e7eb;
      margin-bottom: 24px;
      overflow-x: auto;
    }

    .tab-button {
      padding: 12px 18px;
      background: none;
      border: none;
      font-size: 14px;
      font-weight: 700;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
      margin-bottom: -3px;
      white-space: nowrap;
    }

    .tab-button:hover {
      color: #667eea;
    }

    .tab-button.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-bottom: 18px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 6px;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s;
      background: white;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
      background: #f9fafb;
    }

    .input-help {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }

    .conversion-box {
      background: #fef9c3;
      border: 1px solid #facc15;
      padding: 12px 14px;
      border-radius: 10px;
      margin-bottom: 16px;
      font-size: 13px;
    }

    .conversion-box h4 {
      color: #92400e;
      font-size: 13px;
      margin-bottom: 8px;
      font-weight: 700;
    }

    .conversion-row {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      gap: 10px;
      margin-bottom: 6px;
    }

    .conversion-input {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .conversion-input input {
      flex: 1;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #fbbf24;
      font-size: 13px;
    }

    .conversion-input button {
      padding: 8px 10px;
      border-radius: 6px;
      border: none;
      background: #f59e0b;
      color: white;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
    }

    .toggle-group {
      display: inline-flex;
      gap: 0;
      background: #f3f4f6;
      border-radius: 999px;
      padding: 3px;
      margin-top: 4px;
    }

    .toggle-btn {
      padding: 5px 10px;
      border: none;
      background: transparent;
      color: #6b7280;
      font-size: 11px;
      font-weight: 700;
      cursor: pointer;
      border-radius: 999px;
    }

    .toggle-btn.active {
      background: white;
      color: #667eea;
      box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
    }

    @media (max-width: 768px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      margin-top: 20px;
    }

    @media (max-width: 1024px) {
      .results-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .results-grid {
        grid-template-columns: 1fr;
      }
    }

    .result-box {
      background: linear-gradient(135deg, #f3f4f6 0%, #f9fafb 100%);
      border-left: 4px solid #667eea;
      padding: 14px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
      transition: all 0.3s;
    }

    .result-label {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 4px;
      font-weight: 700;
    }

    .result-value {
      font-size: 22px;
      font-weight: 800;
      color: #667eea;
      font-family: 'Courier New', monospace;
    }

    .result-box.success {
      border-left-color: #10b981;
    }

    .result-box.success .result-value {
      color: #059669;
    }

    .result-box.warning {
      border-left-color: #f59e0b;
    }

    .result-box.danger {
      border-left-color: #ef4444;
    }

    .breakdown-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-top: 18px;
    }

    @media (max-width: 768px) {
      .breakdown-grid {
        grid-template-columns: 1fr;
      }
    }

    .breakdown-item {
      background: #f9fafb;
      border-radius: 8px;
      padding: 12px;
      border-left: 4px solid #667eea;
    }

    .breakdown-label {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .breakdown-value {
      font-size: 18px;
      font-weight: 800;
      font-family: 'Courier New', monospace;
    }

    .info-box {
      background: #e0f2fe;
      border-left: 4px solid #0284c7;
      padding: 12px;
      border-radius: 8px;
      font-size: 12px;
      margin-top: 14px;
      color: #0c4a6e;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
      margin-top: 16px;
    }

    .comparison-card {
      background: #eef2ff;
      border-radius: 10px;
      border: 1px solid #c7d2fe;
      padding: 12px;
    }

    .comparison-card h4 {
      font-size: 13px;
      color: #4f46e5;
      margin-bottom: 8px;
      font-weight: 700;
    }

    .comparison-item {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      padding: 4px 0;
      border-bottom: 1px dashed #e5e7eb;
    }

    .comparison-item:last-child {
      border-bottom: none;
    }

    .comparison-label {
      color: #6b7280;
      font-weight: 600;
    }

    .comparison-value {
      font-family: 'Courier New', monospace;
      font-weight: 700;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin-top: 14px;
    }

    table th, table td {
      padding: 8px 10px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
    }

    table thead {
      background: #f3f4f6;
    }

    .actions {
      display: flex;
      gap: 8px;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    .actions button {
      flex: 1;
      min-width: 120px;
      padding: 10px 14px;
      border-radius: 8px;
      border: 2px solid #e5e7eb;
      background: white;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      color: #374151;
    }

    .actions button:hover {
      border-color: #667eea;
      color: #667eea;
      background: #f3f4f6;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #667eea;
    }

    .btn-primary:hover {
      color: white;
    }

    .chart-container {
      margin-top: 16px;
      padding: 16px;
      background: #f9fafb;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
    }

    .chart-container h3 {
      font-size: 14px;
      margin-bottom: 10px;
      font-weight: 700;
    }

    canvas {
      max-width: 100%;
      border-radius: 6px;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #4f46e5;
      color: white;
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(15,23,42,0.4);
      z-index: 1000;
    }

    }
  </style>
</head>
<body>

<!-- ================= GLOBAL HEADER ================= -->
<div id="site-header"></div>

<!-- ================= BREADCRUMB ================= -->

<nav class="breadcrumb">
  <a href="/Home/">Home</a> ‚Ä∫
  <a href="/Home/finance-calculators/">Finance Calculators</a> ‚Ä∫
  <strong>Salary Calculator</strong>
</nav>  

<section class="section">
  <h1>Advanced Salary Calculator with Tax (India)</h1>

  <div class="card gradient-card">
    <h2>Basic Details & Salary Structure</h2>

    <div class="tabs">
      <button class="tab-button active" onclick="switchTab(event,'basic')">üìã Basic</button>
      <button class="tab-button" onclick="switchTab(event,'tax')">üìä Tax</button>
      <button class="tab-button" onclick="switchTab(event,'deductions')">üîç Deductions</button>
      <button class="tab-button" onclick="switchTab(event,'summary')">üìà Summary</button>
    </div>

    <!-- BASIC TAB -->
    <div id="basic" class="tab-content active">
      <div class="conversion-box">
        <h4>‚ö° Salary Conversion</h4>
        <div class="conversion-row">
          <div class="conversion-input">
            <input type="number" id="monthlyInput" placeholder="Monthly salary (‚Çπ)">
            <button onclick="convertMonthlyToYearly()">‚Üí Yearly</button>
          </div>
          <div style="font-size:12px; color:#92400e; font-weight:700;">
            Yearly: ‚Çπ<span id="convertedYearly">0</span>
          </div>
        </div>
        <div class="conversion-row">
          <div class="conversion-input">
            <input type="number" id="yearlyInput" placeholder="Annual salary (‚Çπ)">
            <button onclick="convertYearlyToMonthly()">‚Üí Monthly</button>
          </div>
          <div style="font-size:12px; color:#92400e; font-weight:700;">
            Monthly: ‚Çπ<span id="convertedMonthly">0</span>
          </div>
        </div>
      </div>

      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Designation / Post</label>
            <input type="text" id="designation" value="Employee">
          </div>

          <div class="form-group">
            <label>
              Basic Salary
              <span class="input-help">(Choose Monthly or Yearly)</span>
            </label>
            <div class="toggle-group">
              <button class="toggle-btn active" data-basic-mode="monthly" onclick="setBasicMode(event,'monthly')">Monthly</button>
              <button class="toggle-btn" data-basic-mode="yearly" onclick="setBasicMode(event,'yearly')">Yearly</button>
            </div>
          </div>

          <div class="form-group">
            <label id="basicLabel">Monthly Basic (‚Çπ)</label>
            <input type="number" id="basicSalary" value="50000" min="0" oninput="calculate()">
          </div>

          <div class="form-group">
            <label>
              HRA (House Rent Allowance)
            </label>
            <div class="toggle-group">
              <button class="toggle-btn active" data-hra-mode="fixed" onclick="setHRAMode(event,'fixed')">‚Çπ Fixed</button>
              <button class="toggle-btn" data-hra-mode="percent" onclick="setHRAMode(event,'percent')">% of Basic</button>
            </div>
          </div>

          <div class="form-group">
            <label id="hraLabel">HRA (‚Çπ/month)</label>
            <input type="number" id="hra" value="15000" min="0" oninput="calculate()">
            <div id="hraInfo" class="input-help"></div>
          </div>

          <div class="form-group">
            <label>DA (Dearness Allowance)</label>
            <div class="toggle-group">
              <button class="toggle-btn active" data-da-mode="fixed" onclick="setDAMode(event,'fixed')">‚Çπ Fixed</button>
              <button class="toggle-btn" data-da-mode="percent" onclick="setDAMode(event,'percent')">% of Basic</button>
            </div>
          </div>

          <div class="form-group">
            <label id="daLabel">DA (‚Çπ/month)</label>
            <input type="number" id="da" value="10000" min="0" oninput="calculate()">
            <div id="daInfo" class="input-help"></div>
          </div>
        </div>

        <div>
          <div class="form-group">
            <label>Conveyance Allowance (‚Çπ/month)</label>
            <input type="number" id="conveyance" value="1600" min="0" oninput="calculate()">
          </div>

          <div class="form-group">
            <label>Medical Allowance (‚Çπ/month)</label>
            <input type="number" id="medical" value="3000" min="0" oninput="calculate()">
          </div>

          <div class="form-group">
            <label>Other Allowances (‚Çπ/month)</label>
            <input type="number" id="other" value="0" min="0" oninput="calculate()">
          </div>

          <div class="form-group">
            <label>Months in Year</label>
            <input type="number" id="months" value="12" min="1" max="12" oninput="calculate()">
            <div class="input-help">Use 12 for full year, or less if partial year</div>
          </div>

          <div class="form-group">
            <label>Financial Year</label>
            <select id="financialYear" onchange="calculate()">
              <option value="2024-25">FY 2024-25</option>
              <option value="2025-26" selected>FY 2025-26</option>
            </select>
          </div>

          <div class="form-group">
            <label>Age Category</label>
            <select id="ageCategory" onchange="calculate()">
              <option value="normal">Below 60</option>
              <option value="senior">60 - 80</option>
              <option value="super">Above 80</option>
            </select>
          </div>

          <div class="form-group">
            <label>Tax Regime</label>
            <select id="regime" onchange="calculate()">
              <option value="new" selected>New Regime</option>
              <option value="old">Old Regime</option>
              <option value="compare">Compare Both</option>
            </select>
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">Basic / Month</div>
          <div class="result-value">‚Çπ<span id="basicMonthlyOut">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Gross / Month</div>
          <div class="result-value">‚Çπ<span id="grossMonthlyOut">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Gross / Year</div>
          <div class="result-value">‚Çπ<span id="grossAnnualOut">0</span></div>
        </div>
        <div class="result-box success">
          <div class="result-label">Total Allowances / Month</div>
          <div class="result-value">‚Çπ<span id="allowancesMonthlyOut">0</span></div>
        </div>
      </div>

      <div class="breakdown-grid">
        <div class="breakdown-item">
          <div class="breakdown-label">Annual Basic</div>
          <div class="breakdown-value">‚Çπ<span id="basicAnnualOut">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Annual Allowances</div>
          <div class="breakdown-value">‚Çπ<span id="allowancesAnnualOut">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Effective Gross (Months √ó)</div>
          <div class="breakdown-value">‚Çπ<span id="effectiveGrossOut">0</span></div>
        </div>
      </div>

      <div class="info-box">
        Gross = Basic + HRA + DA + Conveyance + Medical + Other Allowances per month, multiplied by number of months.
      </div>
    </div>

    <!-- TAX TAB -->
    <div id="tax" class="tab-content">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>80C Investments (‚Çπ)</label>
            <input type="number" id="sec80c" value="0" min="0" oninput="calculate()">
            <div class="input-help">PF, PPF, ELSS, LIC, etc. (Old regime)</div>
          </div>
          <div class="form-group">
            <label>80D Mediclaim (‚Çπ)</label>
            <input type="number" id="sec80d" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Home Loan Interest - Sec 24 (‚Çπ)</label>
            <input type="number" id="sec24" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Education Loan Interest - 80E (‚Çπ)</label>
            <input type="number" id="sec80e" value="0" min="0" oninput="calculate()">
          </div>
        </div>
        <div>
          <div class="form-group">
            <label>Donations - 80G (‚Çπ)</label>
            <input type="number" id="sec80g" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Savings Interest - 80TTA (‚Çπ)</label>
            <input type="number" id="sec80tta" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Standard Deduction (‚Çπ)</label>
            <input type="number" id="standardDeduction" value="75000" min="0" oninput="calculate()">
            <div class="input-help">New regime: 75,000 (latest); Old: 50,000‚Äì75,000 depending on FY.[web:104][web:108][web:114]</div>
          </div>
          <div class="form-group">
            <label>Surcharge % (if applicable)</label>
            <input type="number" id="surchargePct" value="0" min="0" max="37" step="0.1" oninput="calculate()">
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">Taxable Income</div>
          <div class="result-value">‚Çπ<span id="taxableIncomeOut">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Tax (New Regime)</div>
          <div class="result-value">‚Çπ<span id="taxNewOut">0</span></div>
        </div>
        <div class="result-box warning">
          <div class="result-label">Tax (Old Regime)</div>
          <div class="result-value">‚Çπ<span id="taxOldOut">0</span></div>
        </div>
        <div class="result-box danger">
          <div class="result-label">Total Tax (Selected)</div>
          <div class="result-value">‚Çπ<span id="taxSelectedOut">0</span></div>
        </div>
      </div>

      <div class="chart-container">
        <h3>New vs Old Regime (Annual Tax)</h3>
        <canvas id="taxChart" width="600" height="220"></canvas>
      </div>

      <div class="info-box">
        New regime slabs FY 2025-26 (India) are relaxed with 0‚Äì30% in multiple bands, while old regime keeps classic 2.5L/5L/10L slabs.[web:104][web:112]
      </div>
    </div>

    <!-- DEDUCTIONS TAB -->
    <div id="deductions" class="tab-content">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>PF (EPF) % of Basic</label>
            <input type="number" id="pfPct" value="12" min="0" max="100" step="0.1" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>ESI % (on gross)</label>
            <input type="number" id="esiPct" value="0.75" min="0" max="10" step="0.01" oninput="calculate()">
            <div class="input-help">Only if gross ‚â§ 21,000 approx.</div>
          </div>
          <div class="form-group">
            <label>Professional Tax (‚Çπ/month)</label>
            <input type="number" id="ptax" value="200" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Loan EMI (‚Çπ/month)</label>
            <input type="number" id="emi" value="0" min="0" oninput="calculate()">
          </div>
        </div>
        <div>
          <div class="form-group">
            <label>Insurance / Policy (‚Çπ/month)</label>
            <input type="number" id="insurance" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Other Statutory (‚Çπ/month)</label>
            <input type="number" id="otherStat" value="0" min="0" oninput="calculate()">
          </div>
          <div class="form-group">
            <label>Other Voluntary (‚Çπ/month)</label>
            <input type="number" id="otherVol" value="0" min="0" oninput="calculate()">
          </div>
        </div>
      </div>

      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">PF / Month</div>
          <div class="result-value">‚Çπ<span id="pfOut">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">ESI / Month</div>
          <div class="result-value">‚Çπ<span id="esiOut">0</span></div>
        </div>
        <div class="result-box">
          <div class="result-label">Total Deductions / Month</div>
          <div class="result-value">‚Çπ<span id="deductionsMonthlyOut">0</span></div>
        </div>
        <div class="result-box success">
          <div class="result-label">Net Take-Home / Month</div>
          <div class="result-value">‚Çπ<span id="netMonthlyOut">0</span></div>
        </div>
      </div>

      <div class="breakdown-grid">
        <div class="breakdown-item">
          <div class="breakdown-label">Net Annual (After Tax)</div>
          <div class="breakdown-value">‚Çπ<span id="netAnnualOut">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Tax / Year (Selected)</div>
          <div class="breakdown-value">‚Çπ<span id="taxYearOut">0</span></div>
        </div>
        <div class="breakdown-item">
          <div class="breakdown-label">Effective Tax %</div>
          <div class="breakdown-value"><span id="taxEffectivePctOut">0</span>%</div>
        </div>
      </div>
    </div>

    <!-- SUMMARY TAB -->
    <div id="summary" class="tab-content">
      <div class="comparison-grid">
        <div class="comparison-card">
          <h4>Monthly View</h4>
          <div class="comparison-item">
            <span class="comparison-label">Basic</span>
            <span class="comparison-value">‚Çπ<span id="sumBasicM">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Allowances</span>
            <span class="comparison-value">‚Çπ<span id="sumAllowM">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Gross</span>
            <span class="comparison-value">‚Çπ<span id="sumGrossM">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Deductions</span>
            <span class="comparison-value">‚Çπ<span id="sumDedM">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Net Take-Home</span>
            <span class="comparison-value">‚Çπ<span id="sumNetM">0</span></span>
          </div>
        </div>

        <div class="comparison-card">
          <h4>Annual View</h4>
          <div class="comparison-item">
            <span class="comparison-label">Basic</span>
            <span class="comparison-value">‚Çπ<span id="sumBasicA">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Allowances</span>
            <span class="comparison-value">‚Çπ<span id="sumAllowA">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Gross</span>
            <span class="comparison-value">‚Çπ<span id="sumGrossA">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Tax (Selected)</span>
            <span class="comparison-value">‚Çπ<span id="sumTaxA">0</span></span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Net After Tax</span>
            <span class="comparison-value">‚Çπ<span id="sumNetA">0</span></span>
          </div>
        </div>

        <div class="comparison-card">
          <h4>Percentages</h4>
          <div class="comparison-item">
            <span class="comparison-label">PF % of Basic</span>
            <span class="comparison-value"><span id="sumPfPct">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Tax % of Gross</span>
            <span class="comparison-value"><span id="sumTaxPct">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Deductions % of Gross</span>
            <span class="comparison-value"><span id="sumDedPct">0</span>%</span>
          </div>
          <div class="comparison-item">
            <span class="comparison-label">Net % of Gross</span>
            <span class="comparison-value"><span id="sumNetPct">0</span>%</span>
          </div>
        </div>
      </div>

      <h3 style="margin-top:16px; font-size:14px;">Summary Table</h3>
      <table>
        <thead>
          <tr>
            <th>Component</th>
            <th>Monthly (‚Çπ)</th>
            <th>Annual (‚Çπ)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Basic</td>
            <td>‚Çπ<span id="tblBasicM">0</span></td>
            <td>‚Çπ<span id="tblBasicA">0</span></td>
          </tr>
          <tr>
            <td>Allowances</td>
            <td>‚Çπ<span id="tblAllowM">0</span></td>
            <td>‚Çπ<span id="tblAllowA">0</span></td>
          </tr>
          <tr>
            <td>Gross</td>
            <td>‚Çπ<span id="tblGrossM">0</span></td>
            <td>‚Çπ<span id="tblGrossA">0</span></td>
          </tr>
          <tr>
            <td>Deductions (incl. tax)</td>
            <td>‚Çπ<span id="tblDedM">0</span></td>
            <td>‚Çπ<span id="tblDedA">0</span></td>
          </tr>
          <tr style="font-weight:700; background:#eef2ff;">
            <td>Net Take-Home</td>
            <td>‚Çπ<span id="tblNetM">0</span></td>
            <td>‚Çπ<span id="tblNetA">0</span></td>
          </tr>
        </tbody>
      </table>

      <div class="actions">
        <button class="btn-primary" onclick="resetAll()">Reset</button>
        <button onclick="copyResults()">Copy</button>
        <button onclick="printSummary()">Print</button>
      </div>
    </div>
  </div>

  <div class="card chart-container">
    <h3>Monthly Salary Composition</h3>
    <canvas id="salaryChart" width="600" height="220"></canvas>
  </div>

</section>

  <!-- ================= GLOBAL FOOTER ================= -->
<div id="site-footer"></div>

<!-- ================= GLOBAL COMMON JS ================= -->
<script src="/Home/js/common.js"></script>


<script>
let basicMode = 'monthly';   // 'monthly' or 'yearly'
let hraMode = 'fixed';       // 'fixed' or 'percent'
let daMode  = 'fixed';       // 'fixed' or 'percent'

// ---------- UTIL ----------
function formatINR(v) {
  return Math.round(v).toLocaleString('en-IN');
}

function switchTab(e, id) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  e.target.classList.add('active');
}

// ---------- MODES ----------
function setBasicMode(e, mode) {
  basicMode = mode;
  document.querySelectorAll('[data-basic-mode]').forEach(b => b.classList.remove('active'));
  e.target.classList.add('active');
  const label = document.getElementById('basicLabel');
  label.textContent = mode === 'monthly' ? 'Monthly Basic (‚Çπ)' : 'Annual Basic (‚Çπ)';
  calculate();
}

function setHRAMode(e, mode) {
  hraMode = mode;
  document.querySelectorAll('[data-hra-mode]').forEach(b => b.classList.remove('active'));
  e.target.classList.add('active');
  const label = document.getElementById('hraLabel');
  const input = document.getElementById('hra');
  if (mode === 'fixed') {
    label.textContent = 'HRA (‚Çπ/month)';
    input.value = 15000;
  } else {
    label.textContent = 'HRA (% of Basic)';
    input.value = 30;
  }
  calculate();
}

function setDAMode(e, mode) {
  daMode = mode;
  document.querySelectorAll('[data-da-mode]').forEach(b => b.classList.remove('active'));
  e.target.classList.add('active');
  const label = document.getElementById('daLabel');
  const input = document.getElementById('da');
  if (mode === 'fixed') {
    label.textContent = 'DA (‚Çπ/month)';
    input.value = 10000;
  } else {
    label.textContent = 'DA (% of Basic)';
    input.value = 20;
  }
  calculate();
}

// ---------- CONVERSIONS ----------
function convertMonthlyToYearly() {
  const m = parseFloat(document.getElementById('monthlyInput').value) || 0;
  const y = m * 12;
  document.getElementById('convertedYearly').textContent = formatINR(y);
  showToast('Converted monthly to yearly');
}

function convertYearlyToMonthly() {
  const y = parseFloat(document.getElementById('yearlyInput').value) || 0;
  const m = y / 12;
  document.getElementById('convertedMonthly').textContent = formatINR(m);
  showToast('Converted yearly to monthly');
}

// ---------- TAX HELPERS (India FY25-26) ----------
function taxNewRegime(income) {
  // Slabs from ClearTax / other references for FY 2025-26 new regime.[web:104][web:112]
  let tax = 0;
  const slabs = [
    {limit: 400000, rate: 0},
    {limit: 800000, rate: 0.05},
    {limit: 1200000, rate: 0.10},
    {limit: 1600000, rate: 0.15},
    {limit: 2000000, rate: 0.20},
    {limit: 2400000, rate: 0.25},
    {limit: Infinity, rate: 0.30}
  ];
  let prev = 0;
  for (let i = 0; i < slabs.length; i++) {
    const slab = slabs[i];
    if (income > slab.limit) {
      tax += (slab.limit - prev) * slab.rate;
      prev = slab.limit;
    } else {
      tax += (income - prev) * slab.rate;
      break;
    }
  }
  return Math.max(0, tax);
}

function taxOldRegime(income, ageCategory) {
  // Old slabs unchanged as per references.[web:104][web:110][web:112]
  let basicExempt = 250000;
  if (ageCategory === 'senior') basicExempt = 300000;
  if (ageCategory === 'super') basicExempt = 500000;
  if (income <= basicExempt) return 0;

  let tax = 0;
  const slabs = [
    {limit: basicExempt, rate: 0},
    {limit: 500000, rate: 0.05},
    {limit: 1000000, rate: 0.20},
    {limit: Infinity, rate: 0.30}
  ];
  let prev = 0;
  for (let i = 0; i < slabs.length; i++) {
    const slab = slabs[i];
    const effLimit = slab.limit;
    if (income > effLimit) {
      tax += (effLimit - prev) * slab.rate;
      prev = effLimit;
    } else {
      tax += (income - prev) * slab.rate;
      break;
    }
  }
  return Math.max(0, tax);
}

// ---------- MAIN CALC ----------
function calculate() {
  // BASIC & ALLOWANCES
  const basicInput = parseFloat(document.getElementById('basicSalary').value) || 0;
  const months = parseFloat(document.getElementById('months').value) || 12;

  const basicMonthly = basicMode === 'monthly' ? basicInput : basicInput / 12;
  const basicAnnual = basicMonthly * 12;

  const hraRaw = parseFloat(document.getElementById('hra').value) || 0;
  const daRaw  = parseFloat(document.getElementById('da').value) || 0;

  let hraMonthly, daMonthly;
  if (hraMode === 'fixed') {
    hraMonthly = hraRaw;
    document.getElementById('hraInfo').textContent = '';
  } else {
    hraMonthly = basicMonthly * (hraRaw / 100);
    document.getElementById('hraInfo').textContent = `= ‚Çπ${formatINR(hraMonthly)} / month`;
  }

  if (daMode === 'fixed') {
    daMonthly = daRaw;
    document.getElementById('daInfo').textContent = '';
  } else {
    daMonthly = basicMonthly * (daRaw / 100);
    document.getElementById('daInfo').textContent = `= ‚Çπ${formatINR(daMonthly)} / month`;
  }

  const conveyance = parseFloat(document.getElementById('conveyance').value) || 0;
  const medical    = parseFloat(document.getElementById('medical').value) || 0;
  const otherAll   = parseFloat(document.getElementById('other').value) || 0;

  const allowancesMonthly = hraMonthly + daMonthly + conveyance + medical + otherAll;
  const grossMonthly = basicMonthly + allowancesMonthly;
  const grossAnnual  = grossMonthly * 12;
  const effectiveGross = grossMonthly * months;

  // Update basic tab
  document.getElementById('basicMonthlyOut').textContent    = formatINR(basicMonthly);
  document.getElementById('grossMonthlyOut').textContent    = formatINR(grossMonthly);
  document.getElementById('grossAnnualOut').textContent     = formatINR(grossAnnual);
  document.getElementById('allowancesMonthlyOut').textContent = formatINR(allowancesMonthly);
  document.getElementById('basicAnnualOut').textContent     = formatINR(basicAnnual);
  document.getElementById('allowancesAnnualOut').textContent= formatINR(allowancesMonthly * 12);
  document.getElementById('effectiveGrossOut').textContent  = formatINR(effectiveGross);

  // TAX INPUTS
  const sec80c   = parseFloat(document.getElementById('sec80c').value) || 0;
  const sec80d   = parseFloat(document.getElementById('sec80d').value) || 0;
  const sec24    = parseFloat(document.getElementById('sec24').value) || 0;
  const sec80e   = parseFloat(document.getElementById('sec80e').value) || 0;
  const sec80g   = parseFloat(document.getElementById('sec80g').value) || 0;
  const sec80tta = parseFloat(document.getElementById('sec80tta').value) || 0;
  const stdDed   = parseFloat(document.getElementById('standardDeduction').value) || 0;
  const surchargePct = parseFloat(document.getElementById('surchargePct').value) || 0;
  const ageCat   = document.getElementById('ageCategory').value;
  const regime   = document.getElementById('regime').value;

  let deductionsOld = sec80c + sec80d + sec24 + sec80e + sec80g + Math.min(sec80tta,10000);
  deductionsOld = Math.min(deductionsOld, grossAnnual); // safety

  const taxableNew = Math.max(0, grossAnnual - stdDed);                         // no 80C etc
  const taxableOld = Math.max(0, grossAnnual - stdDed - deductionsOld);

  const taxNewRaw = taxNewRegime(taxableNew);
  const taxOldRaw = taxOldRegime(taxableOld, ageCat);

  const surchargeNew = taxNewRaw * (surchargePct/100);
  const surchargeOld = taxOldRaw * (surchargePct/100);

  const cessNew = (taxNewRaw + surchargeNew) * 0.04;
  const cessOld = (taxOldRaw + surchargeOld) * 0.04;

  const taxNewTotal = taxNewRaw + surchargeNew + cessNew;
  const taxOldTotal = taxOldRaw + surchargeOld + cessOld;

  // Select regime
  let taxSelected = taxNewTotal;
  if (regime === 'old') taxSelected = taxOldTotal;
  if (regime === 'compare') taxSelected = Math.min(taxNewTotal, taxOldTotal);

  document.getElementById('taxableIncomeOut').textContent = formatINR(regime === 'old' ? taxableOld : taxableNew);
  document.getElementById('taxNewOut').textContent        = formatINR(taxNewTotal);
  document.getElementById('taxOldOut').textContent        = formatINR(taxOldTotal);
  document.getElementById('taxSelectedOut').textContent   = formatINR(taxSelected);

  // DEDUCTION TAB
  const pfPct  = (parseFloat(document.getElementById('pfPct').value) || 0) / 100;
  const esiPct = (parseFloat(document.getElementById('esiPct').value) || 0) / 100;
  const ptax   = parseFloat(document.getElementById('ptax').value) || 0;
  const emi    = parseFloat(document.getElementById('emi').value) || 0;
  const ins    = parseFloat(document.getElementById('insurance').value) || 0;
  const otherS = parseFloat(document.getElementById('otherStat').value) || 0;
  const otherV = parseFloat(document.getElementById('otherVol').value) || 0;

  const pfMonthly  = basicMonthly * pfPct;
  const esiMonthly = grossMonthly <= 21000 ? grossMonthly * esiPct : 0;
  const deductionsMonthly = pfMonthly + esiMonthly + ptax + emi + ins + otherS + otherV + (taxSelected/12);
  const netMonthly = grossMonthly - deductionsMonthly;
  const netAnnual  = netMonthly * 12;

  document.getElementById('pfOut').textContent   = formatINR(pfMonthly);
  document.getElementById('esiOut').textContent  = formatINR(esiMonthly);
  document.getElementById('deductionsMonthlyOut').textContent = formatINR(deductionsMonthly);
  document.getElementById('netMonthlyOut').textContent = formatINR(netMonthly);
  document.getElementById('netAnnualOut').textContent  = formatINR(netAnnual);
  document.getElementById('taxYearOut').textContent    = formatINR(taxSelected);
  const effTaxPct = grossAnnual > 0 ? (taxSelected / grossAnnual * 100) : 0;
  document.getElementById('taxEffectivePctOut').textContent = effTaxPct.toFixed(2);

  // SUMMARY
  document.getElementById('sumBasicM').textContent = formatINR(basicMonthly);
  document.getElementById('sumAllowM').textContent = formatINR(allowancesMonthly);
  document.getElementById('sumGrossM').textContent = formatINR(grossMonthly);
  document.getElementById('sumDedM').textContent   = formatINR(deductionsMonthly);
  document.getElementById('sumNetM').textContent   = formatINR(netMonthly);

  document.getElementById('sumBasicA').textContent = formatINR(basicAnnual);
  document.getElementById('sumAllowA').textContent = formatINR(allowancesMonthly*12);
  document.getElementById('sumGrossA').textContent = formatINR(grossAnnual);
  document.getElementById('sumTaxA').textContent   = formatINR(taxSelected);
  document.getElementById('sumNetA').textContent   = formatINR(netAnnual);

  const pfRatio   = basicAnnual > 0 ? (pfMonthly*12/basicAnnual*100) : 0;
  const taxRatio  = grossAnnual > 0 ? (taxSelected/grossAnnual*100) : 0;
  const dedRatio  = grossMonthly > 0 ? (deductionsMonthly/grossMonthly*100) : 0;
  const netRatio  = grossMonthly > 0 ? (netMonthly/grossMonthly*100) : 0;

  document.getElementById('sumPfPct').textContent  = pfRatio.toFixed(2);
  document.getElementById('sumTaxPct').textContent = taxRatio.toFixed(2);
  document.getElementById('sumDedPct').textContent = dedRatio.toFixed(2);
  document.getElementById('sumNetPct').textContent = netRatio.toFixed(2);

  document.getElementById('tblBasicM').textContent = formatINR(basicMonthly);
  document.getElementById('tblBasicA').textContent = formatINR(basicAnnual);
  document.getElementById('tblAllowM').textContent = formatINR(allowancesMonthly);
  document.getElementById('tblAllowA').textContent = formatINR(allowancesMonthly*12);
  document.getElementById('tblGrossM').textContent = formatINR(grossMonthly);
  document.getElementById('tblGrossA').textContent = formatINR(grossAnnual);
  document.getElementById('tblDedM').textContent   = formatINR(deductionsMonthly);
  document.getElementById('tblDedA').textContent   = formatINR(deductionsMonthly*12);
  document.getElementById('tblNetM').textContent   = formatINR(netMonthly);
  document.getElementById('tblNetA').textContent   = formatINR(netAnnual);

  drawSalaryChart(basicMonthly, allowancesMonthly, deductionsMonthly, netMonthly);
  drawTaxChart(taxNewTotal, taxOldTotal);
}

// ---------- CHARTS ----------
function drawSalaryChart(basic, allow, ded, net) {
  const c = document.getElementById('salaryChart');
  const ctx = c.getContext('2d');
  ctx.clearRect(0,0,c.width,c.height);

  const data = [
    {label:'Basic', value:basic, color:'#4f46e5'},
    {label:'Allowances', value:allow, color:'#a855f7'},
    {label:'Deductions', value:ded, color:'#f97316'},
    {label:'Net', value:net, color:'#22c55e'}
  ];
  const maxVal = Math.max(...data.map(d=>Math.abs(d.value))) || 1;
  const maxHeight = 150;
  const barWidth = 50;
  const gap = 40;
  let x = 40;
  data.forEach(d=>{
    const h = Math.abs(d.value)/maxVal*maxHeight;
    const y = 180 - h;
    ctx.fillStyle = d.color;
    ctx.fillRect(x,y,barWidth,h);
    ctx.fillStyle = '#111827';
    ctx.font = '11px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('‚Çπ'+formatINR(d.value), x+barWidth/2, y-6);
    ctx.fillText(d.label, x+barWidth/2, 200);
    x += barWidth + gap;
  });
}

function drawTaxChart(tNew, tOld) {
  const c = document.getElementById('taxChart');
  const ctx = c.getContext('2d');
  ctx.clearRect(0,0,c.width,c.height);
  const maxVal = Math.max(tNew, tOld) || 1;
  const maxHeight = 150;
  const barWidth = 70;
  const gap = 80;
  const startX = 80;

  const data = [
    {label:'New', value:tNew, color:'#4f46e5'},
    {label:'Old', value:tOld, color:'#a855f7'}
  ];
  data.forEach((d,i)=>{
    const h = d.value/maxVal*maxHeight;
    const x = startX + i*(barWidth+gap);
    const y = 180 - h;
    ctx.fillStyle = d.color;
    ctx.fillRect(x,y,barWidth,h);
    ctx.fillStyle = '#111827';
    ctx.font = '11px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('‚Çπ'+formatINR(d.value), x+barWidth/2, y-6);
    ctx.fillText(d.label, x+barWidth/2, 200);
  });
}

// ---------- OTHER ACTIONS ----------
function resetAll() {
  basicMode = 'monthly';
  hraMode  = 'fixed';
  daMode   = 'fixed';
  document.getElementById('basicSalary').value = 50000;
  document.getElementById('hra').value = 15000;
  document.getElementById('da').value  = 10000;
  document.getElementById('conveyance').value = 1600;
  document.getElementById('medical').value = 3000;
  document.getElementById('other').value = 0;
  document.getElementById('months').value = 12;
  document.getElementById('sec80c').value = 0;
  document.getElementById('sec80d').value = 0;
  document.getElementById('sec24').value  = 0;
  document.getElementById('sec80e').value = 0;
  document.getElementById('sec80g').value = 0;
  document.getElementById('sec80tta').value = 0;
  document.getElementById('standardDeduction').value = 75000;
  document.getElementById('surchargePct').value = 0;
  document.getElementById('pfPct').value = 12;
  document.getElementById('esiPct').value = 0.75;
  document.getElementById('ptax').value = 200;
  document.getElementById('emi').value = 0;
  document.getElementById('insurance').value = 0;
  document.getElementById('otherStat').value = 0;
  document.getElementById('otherVol').value = 0;
  document.getElementById('regime').value = 'new';

  document.querySelectorAll('[data-basic-mode]').forEach(b=>b.classList.remove('active'));
  document.querySelector('[data-basic-mode="monthly"]').classList.add('active');
  document.querySelectorAll('[data-hra-mode]').forEach(b=>b.classList.remove('active'));
  document.querySelector('[data-hra-mode="fixed"]').classList.add('active');
  document.querySelectorAll('[data-da-mode]').forEach(b=>b.classList.remove('active'));
  document.querySelector('[data-da-mode="fixed"]').classList.add('active');

  document.getElementById('basicLabel').textContent = 'Monthly Basic (‚Çπ)';
  document.getElementById('hraLabel').textContent = 'HRA (‚Çπ/month)';
  document.getElementById('daLabel').textContent = 'DA (‚Çπ/month)';

  calculate();
}

function copyResults() {
  const gross = document.getElementById('grossMonthlyOut').textContent;
  const net   = document.getElementById('netMonthlyOut').textContent;
  const tax   = document.getElementById('taxSelectedOut').textContent;
  const text = `Gross / Month: ‚Çπ${gross} | Net / Month: ‚Çπ${net} | Annual Tax: ‚Çπ${tax}`;
  navigator.clipboard.writeText(text);
  showToast('Results copied');
}

function printSummary() {
  const w = window.open('', '_blank');
  w.document.write('<h2>Salary Summary</h2>');
  w.document.write(`<p>Gross / Month: ‚Çπ${document.getElementById('grossMonthlyOut').textContent}</p>`);
  w.document.write(`<p>Net / Month: ‚Çπ${document.getElementById('netMonthlyOut').textContent}</p>`);
  w.document.write(`<p>Annual Tax: ‚Çπ${document.getElementById('taxSelectedOut').textContent}</p>`);
  w.print();
}

function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(), 2200);
}

window.addEventListener('load', calculate);
</script>

</body>
</html>
