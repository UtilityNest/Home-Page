<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Hindi Typing Tool ‚Äì Type English to Hindi | UtilityNest</title>
  <meta name="description" content="Free Hindi Typing Tool to type Hindi using English keyboard. Accurate phonetic typing with correct Hindi words. Fast, secure and real-time.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="/Home/">

  <!-- GLOBAL CSS -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    textarea{
      width:100%;
      min-height:180px;
      padding:14px;
      font-size:17px;
      border:2px solid #d1d5db;
      border-radius:10px;
      resize:vertical;
    }
    textarea:focus{
      outline:none;
      border-color:#16a34a;
      box-shadow:0 0 0 2px #bbf7d0;
    }
    .hint{
      font-size:14px;
      color:#6b7280;
      margin-top:6px;
    }
    .actions{
      display:flex;
      gap:10px;
      margin-top:15px;
      flex-wrap:wrap;
    }
    .actions button{
      flex:1;
    }

    /* Suggestion UI */
    .suggestion-wrapper{
      position:relative;
      margin-top:8px;
    }
    #suggestionsBox{
      position:absolute;
      left:0;
      right:0;
      top:100%;
      margin-top:4px;
      background:#ffffff;
      border:1px solid #d1d5db;
      border-radius:6px;
      max-height:180px;
      overflow-y:auto;
      display:none;
      z-index:1000;
      font-size:14px;
      box-shadow:0 8px 20px rgba(0,0,0,0.06);
    }
    .suggestion-item{
      padding:6px 10px;
      cursor:pointer;
      white-space:nowrap;
      text-overflow:ellipsis;
      overflow:hidden;
    }
    .suggestion-item:hover,
    .suggestion-item.active{
      background:#e5f3ff;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <a href="">UtilityNest</a>
    <nav>
      <a href="government-tools/">Government</a>
      <a href="finance-calculators/">Finance</a>
      <a href="student-tools/">Student</a>
      <a href="utility-tools/">Utility</a>
      <a href="hindi-tools/">Hindi</a>
    </nav>
  </header>

  <!-- BREADCRUMB -->
  <nav class="breadcrumb">
    <a href="">Home</a> ‚Ä∫
    <a href="hindi-tools/">Hindi Tools</a> ‚Ä∫
    Hindi Typing Tool
  </nav>

  <!-- MAIN -->
  <section class="section">
    <h1>Hindi Typing Tool</h1>
    <p>
      ‡§á‡§∏ Hindi Typing Tool ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§∏‡•á ‡§Ü‡§™
      <strong>English keyboard</strong> ‡§∏‡•á
      <strong>‡§∏‡§π‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∂‡§¨‡•ç‡§¶</strong> ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§
      ‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§Ü‡§™ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ö‡§™‡§®‡•á-‡§Ü‡§™ ‡§∏‡§π‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§
    </p>

    <!-- INPUT -->
    <div class="card gradient-card">
      <h2>Type in English</h2>

      <div class="suggestion-wrapper">
        <textarea
          id="englishInput"
          placeholder="Type here (e.g. mera bharat mahan hai)"
          oninput="handleInput(event)"
          onkeydown="handleSuggestionKeys(event)"
        ></textarea>
        <div id="suggestionsBox"></div>
      </div>

      <p class="hint">
        Example: <strong>mera bharat mahan hai</strong> ‚Üí ‡§Æ‡•á‡§∞‡§æ ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡§π‡§æ‡§® ‡§π‡•à‡•§
      </p>
    </div>

    <!-- OUTPUT -->
    <div class="card">
      <h2>Hindi Output</h2>
      <textarea
        id="hindiOutput"
        placeholder="‡§Ø‡§π‡§æ‡§Å ‡§∏‡§π‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ..."
        readonly
      ></textarea>
      <div class="actions">
        <button class="btn-outline" onclick="copyHindi()">üìã Copy Hindi Text</button>
        <button class="btn-outline" onclick="clearText()">üßπ Clear</button>
      </div>
    </div>

    <!-- INFO -->
    <div class="card">
      <h2>About Hindi Typing Tool</h2>
      <p>
        ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç, ‡§™‡•ç‡§∞‡§§‡§ø‡§Ø‡•ã‡§ó‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ‡§ì‡§Ç, ‡§¨‡•ç‡§≤‡•â‡§ó‡§∞‡•ç‡§∏ ‡§î‡§∞ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§ï‡•ç‡§∞‡§ø‡§è‡§ü‡§∞‡•ç‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•á‡§π‡§¶ ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§π‡•à‡•§
        ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡§π‡•Ä‡§Ç ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ‡•§
      </p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-grid">
      <div>
        <h3>Hindi Tools</h3>
        <a href="hindi-tools/hindi-word-counter/">Hindi Word Counter</a>
        <a href="hindi-tools/hindi-character-counter/">Hindi Character Counter</a>
        <a href="hindi-tools/hindi-typing-tool/">Hindi Typing Tool</a>
      </div>
      <div>
        <h3>Popular Tools</h3>
        <a href="age-calculator/">Age Calculator</a>
        <a href="emi-calculator/">EMI Calculator</a>
      </div>
    </div>
    <p class="copy">¬© 2025 UtilityNest</p>
  </footer>

  <!-- TRANSLITERATION + SUGGESTIONS -->
  <script>
    /*
      Simplified phonetic rules:
      - Normal user typing uses: t/d/n = ‡§§/‡§¶/‡§® (dental).
      - Retroflex ‡§ü/‡§°/‡§£ available with tt/dd/nn when needed.
      - No taa2, na2 etc.
    */

    const FULL_MAP = {
      // Vowel-only syllables (common patterns)
      "a":"‡§Ö","aa":"‡§Ü","i":"‡§á","ee":"‡§à","u":"‡§â","oo":"‡§ä",
      "e":"‡§è","ai":"‡§ê","o":"‡§ì","au":"‡§î",

      // ‡§ï group
      "ka":"‡§ï","kaa":"‡§ï‡§æ","ki":"‡§ï‡§ø","kee":"‡§ï‡•Ä","kee":"‡§ï‡•Ä","ku":"‡§ï‡•Å","koo":"‡§ï‡•Ç","ke":"‡§ï‡•á",
      "kai":"‡§ï‡•à","ko":"‡§ï‡•ã","kau":"‡§ï‡•å","kam":"‡§ï‡§Ç","kah":"‡§ï‡§É",

      // ‡§ñ
      "kha":"‡§ñ","khaa":"‡§ñ‡§æ","khi":"‡§ñ‡§ø","khee":"‡§ñ‡•Ä","khu":"‡§ñ‡•Å","khoo":"‡§ñ‡•Ç",
      "khe":"‡§ñ‡•á","khai":"‡§ñ‡•à","kho":"‡§ñ‡•ã","khau":"‡§ñ‡•å","kham":"‡§ñ‡§Ç","khah":"‡§ñ‡§É",

      // ‡§ó
      "ga":"‡§ó","gaa":"‡§ó‡§æ","gi":"‡§ó‡§ø","gee":"‡§ó‡•Ä","gu":"‡§ó‡•Å","goo":"‡§ó‡•Ç",
      "ge":"‡§ó‡•á","gai":"‡§ó‡•à","go":"‡§ó‡•ã","gau":"‡§ó‡•å","gam":"‡§ó‡§Ç","gah":"‡§ó‡§É",

      // ‡§ò
      "gha":"‡§ò","ghaa":"‡§ò‡§æ","ghi":"‡§ò‡§ø","ghee":"‡§ò‡•Ä","ghu":"‡§ò‡•Å","ghoo":"‡§ò‡•Ç",
      "ghe":"‡§ò‡•á","ghai":"‡§ò‡•à","gho":"‡§ò‡•ã","ghau":"‡§ò‡•å","gham":"‡§ò‡§Ç","ghah":"‡§ò‡§É",

      // ‡§ö
      "cha":"‡§ö","chaa":"‡§ö‡§æ","chi":"‡§ö‡§ø","chee":"‡§ö‡•Ä","chu":"‡§ö‡•Å","choo":"‡§ö‡•Ç",
      "che":"‡§ö‡•á","chai":"‡§ö‡•à","cho":"‡§ö‡•ã","chau":"‡§ö‡•å","cham":"‡§ö‡§Ç","chah":"‡§ö‡§É",

      // ‡§õ
      "chha":"‡§õ","chhaa":"‡§õ‡§æ","chhi":"‡§õ‡§ø","chhee":"‡§õ‡•Ä","chhu":"‡§õ‡•Å","chhoo":"‡§õ‡•Ç",
      "chhe":"‡§õ‡•á","chhai":"‡§õ‡•à","chho":"‡§õ‡•ã","chhou":"‡§õ‡•å","chham":"‡§õ‡§Ç","chhah":"‡§õ‡§É",

      // ‡§ú
      "ja":"‡§ú","jaa":"‡§ú‡§æ","ji":"‡§ú‡§ø","jee":"‡§ú‡•Ä","ju":"‡§ú‡•Å","joo":"‡§ú‡•Ç",
      "je":"‡§ú‡•á","jai":"‡§ú‡•à","jo":"‡§ú‡•ã","jau":"‡§ú‡•å","jam":"‡§ú‡§Ç","jah":"‡§ú‡§É",

      // ‡§ù
      "jha":"‡§ù","jhaa":"‡§ù‡§æ","jhi":"‡§ù‡§ø","jhee":"‡§ù‡•Ä","jhu":"‡§ù‡•Å","jhoo":"‡§ù‡•Ç",
      "jhe":"‡§ù‡•á","jhai":"‡§ù‡•à","jho":"‡§ù‡•ã","jhau":"‡§ù‡•å","jham":"‡§ù‡§Ç","jhah":"‡§ù‡§É",

      // ‡§ü / ‡§† / ‡§° / ‡§¢ retroflex via double letters
      "tta":"‡§ü","ttaa":"‡§ü‡§æ","tti":"‡§ü‡§ø","ttee":"‡§ü‡•Ä","ttu":"‡§ü‡•Å","ttoo":"‡§ü‡•Ç",
      "tte":"‡§ü‡•á","ttai":"‡§ü‡•à","tto":"‡§ü‡•ã","ttau":"‡§ü‡•å",

      "ttha":"‡§†","tthaa":"‡§†‡§æ","tthi":"‡§†‡§ø","tthee":"‡§†‡•Ä","tthu":"‡§†‡•Å","tthoo":"‡§†‡•Ç",
      "tthe":"‡§†‡•á","tthai":"‡§†‡•à","ttho":"‡§†‡•ã","tthau":"‡§†‡•å",

      "dda":"‡§°","ddaa":"‡§°‡§æ","ddi":"‡§°‡§ø","ddee":"‡§°‡•Ä","ddu":"‡§°‡•Å","ddoo":"‡§°‡•Ç",
      "dde":"‡§°‡•á","ddai":"‡§°‡•à","ddo":"‡§°‡•ã","ddau":"‡§°‡•å",

      "ddha":"‡§¢","ddhaa":"‡§¢‡§æ","ddhi":"‡§¢‡§ø","ddhee":"‡§¢‡•Ä","ddhu":"‡§¢‡•Å","ddhoo":"‡§¢‡•Ç",
      "ddhe":"‡§¢‡•á","ddhai":"‡§¢‡•à","ddho":"‡§¢‡•ã","ddhau":"‡§¢‡•å",

      // normal dental ‡§§, ‡§•, ‡§¶, ‡§ß
      "ta":"‡§§","taa":"‡§§‡§æ","ti":"‡§§‡§ø","tee":"‡§§‡•Ä","tu":"‡§§‡•Å","too":"‡§§‡•Ç",
      "te":"‡§§‡•á","tai":"‡§§‡•à","to":"‡§§‡•ã","tau":"‡§§‡•å","tam":"‡§§‡§Ç",

      "tha":"‡§•","thaa":"‡§•‡§æ","thi":"‡§•‡§ø","thee":"‡§•‡•Ä","thu":"‡§•‡•Å","thoo":"‡§•‡•Ç",
      "the":"‡§•‡•á","thai":"‡§•‡•à","tho":"‡§•‡•ã","thau":"‡§•‡•å",

      "da":"‡§¶","daa":"‡§¶‡§æ","di":"‡§¶‡§ø","dee":"‡§¶‡•Ä","du":"‡§¶‡•Å","doo":"‡§¶‡•Ç",
      "de":"‡§¶‡•á","dai":"‡§¶‡•à","do":"‡§¶‡•ã","dau":"‡§¶‡•å","dam":"‡§¶‡§Ç",

      "dha":"‡§ß","dhaa":"‡§ß‡§æ","dhi":"‡§ß‡§ø","dhee":"‡§ß‡•Ä","dhu":"‡§ß‡•Å","dhoo":"‡§ß‡•Ç",
      "dhe":"‡§ß‡•á","dhai":"‡§ß‡•à","dho":"‡§ß‡•ã","dhau":"‡§ß‡•å","dham":"‡§ß‡§Ç",

      // ‡§® (default dental) + retroflex by nn
      "na":"‡§®","naa":"‡§®‡§æ","ni":"‡§®‡§ø","nee":"‡§®‡•Ä","nu":"‡§®‡•Å","noo":"‡§®‡•Ç",
      "ne":"‡§®‡•á","nai":"‡§®‡•à","no":"‡§®‡•ã","nau":"‡§®‡•å","nam":"‡§®‡§Ç",

      "nna":"‡§£","nnaa":"‡§£‡§æ","nni":"‡§£‡§ø","nnee":"‡§£‡•Ä","nnu":"‡§£‡•Å","nnoo":"‡§£‡•Ç",
      "nne":"‡§£‡•á","nnai":"‡§£‡•à","nno":"‡§£‡•ã","nnau":"‡§£‡•å","nnm":"‡§£‡§Ç",

      // ‡§™
      "pa":"‡§™","paa":"‡§™‡§æ","pi":"‡§™‡§ø","pee":"‡§™‡•Ä","pu":"‡§™‡•Å","poo":"‡§™‡•Ç",
      "pe":"‡§™‡•á","pai":"‡§™‡•à","po":"‡§™‡•ã","pau":"‡§™‡•å","pam":"‡§™‡§Ç",

      // ‡§´
      "fa":"‡§´","faa":"‡§´‡§æ","fi":"‡§´‡§ø","fee":"‡§´‡•Ä","fu":"‡§´‡•Å","foo":"‡§´‡•Ç",
      "phe":"‡§´‡•á","phai":"‡§´‡•à","pho":"‡§´‡•ã","phau":"‡§´‡•å","pham":"‡§´‡§Ç",

      "pha":"‡§´","phaa":"‡§´‡§æ","phi":"‡§´‡§ø","phee":"‡§´‡•Ä","phu":"‡§´‡•Å","phoo":"‡§´‡•Ç",

      // ‡§¨
      "ba":"‡§¨","baa":"‡§¨‡§æ","bi":"‡§¨‡§ø","bee":"‡§¨‡•Ä","bu":"‡§¨‡•Å","boo":"‡§¨‡•Ç",
      "be":"‡§¨‡•á","bai":"‡§¨‡•à","bo":"‡§¨‡•ã","bau":"‡§¨‡•å","bam":"‡§¨‡§Ç",

      // ‡§≠
      "bha":"‡§≠","bhaa":"‡§≠‡§æ","bhi":"‡§≠‡§ø","bhee":"‡§≠‡•Ä","bhu":"‡§≠‡•Å","bhoo":"‡§≠‡•Ç",
      "bhe":"‡§≠‡•á","bhai":"‡§≠‡•à","bho":"‡§≠‡•ã","bhau":"‡§≠‡•å","bham":"‡§≠‡§Ç",

      // ‡§Æ
      "ma":"‡§Æ","maa":"‡§Æ‡§æ","mi":"‡§Æ‡§ø","mee":"‡§Æ‡•Ä","mu":"‡§Æ‡•Å","moo":"‡§Æ‡•Ç",
      "me":"‡§Æ‡•á","mai":"‡§Æ‡•à","mo":"‡§Æ‡•ã","mau":"‡§Æ‡•å","mam":"‡§Æ‡§Ç",

      // ‡§Ø
      "ya":"‡§Ø","yaa":"‡§Ø‡§æ","yi":"‡§Ø‡§ø","yee":"‡§Ø‡•Ä","yu":"‡§Ø‡•Å","yoo":"‡§Ø‡•Ç",
      "ye":"‡§Ø‡•á","yai":"‡§Ø‡•à","yo":"‡§Ø‡•ã","yau":"‡§Ø‡•å","yam":"‡§Ø‡§Ç",

      // ‡§∞
      "ra":"‡§∞","raa":"‡§∞‡§æ","ri":"‡§∞‡§ø","ree":"‡§∞‡•Ä","ru":"‡§∞‡•Å","roo":"‡§∞‡•Ç",
      "re":"‡§∞‡•á","rai":"‡§∞‡•à","ro":"‡§∞‡•ã","rau":"‡§∞‡•å","ram":"‡§∞‡§Ç",

      // ‡§≤
      "la":"‡§≤","laa":"‡§≤‡§æ","li":"‡§≤‡§ø","lee":"‡§≤‡•Ä","lu":"‡§≤‡•Å","loo":"‡§≤‡•Ç",
      "le":"‡§≤‡•á","lai":"‡§≤‡•à","lo":"‡§≤‡•ã","lau":"‡§≤‡•å","lam":"‡§≤‡§Ç",

      // ‡§µ
      "va":"‡§µ","vaa":"‡§µ‡§æ","vi":"‡§µ‡§ø","vee":"‡§µ‡•Ä","vu":"‡§µ‡•Å","voo":"‡§µ‡•Ç",
      "ve":"‡§µ‡•á","vai":"‡§µ‡•à","vo":"‡§µ‡•ã","vau":"‡§µ‡•å","vam":"‡§µ‡§Ç",

      // ‡§∏
      "sa":"‡§∏","saa":"‡§∏‡§æ","si":"‡§∏‡§ø","see":"‡§∏‡•Ä","su":"‡§∏‡•Å","soo":"‡§∏‡•Ç",
      "se":"‡§∏‡•á","sai":"‡§∏‡•à","so":"‡§∏‡•ã","sau":"‡§∏‡•å","sam":"‡§∏‡§Ç",

      // ‡§∂
      "sha":"‡§∂","shaa":"‡§∂‡§æ","shi":"‡§∂‡§ø","shee":"‡§∂‡•Ä","shu":"‡§∂‡•Å","shoo":"‡§∂‡•Ç",
      "she":"‡§∂‡•á","shai":"‡§∂‡•à","sho":"‡§∂‡•ã","shau":"‡§∂‡•å","sham":"‡§∂‡§Ç",

      // ‡§∑ (optional) via "ssha"
      "ssha":"‡§∑","sshaa":"‡§∑‡§æ","sshi":"‡§∑‡§ø","sshee":"‡§∑‡•Ä","sshu":"‡§∑‡•Å","sshoo":"‡§∑‡•Ç",

      // ‡§π
      "ha":"‡§π","haa":"‡§π‡§æ","hi":"‡§π‡§ø","hee":"‡§π‡•Ä","hu":"‡§π‡•Å","hoo":"‡§π‡•Ç",
      "he":"‡§π‡•á","hai":"‡§π‡•à","ho":"‡§π‡•ã","hau":"‡§π‡•å","ham":"‡§π‡§Ç",

      // ‡§ï‡•ç‡§∑, ‡§§‡•ç‡§∞, ‡§ú‡•ç‡§û
      "ksha":"‡§ï‡•ç‡§∑","kshaa":"‡§ï‡•ç‡§∑‡§æ","kshi":"‡§ï‡•ç‡§∑‡§ø","kshee":"‡§ï‡•ç‡§∑‡•Ä","kshu":"‡§ï‡•ç‡§∑‡•Å","kshoo":"‡§ï‡•ç‡§∑‡•Ç",
      "kshe":"‡§ï‡•ç‡§∑‡•á","kshai":"‡§ï‡•ç‡§∑‡•à","ksho":"‡§ï‡•ç‡§∑‡•ã","kshau":"‡§ï‡•ç‡§∑‡•å","ksham":"‡§ï‡•ç‡§∑‡§Ç",

      "tra":"‡§§‡•ç‡§∞","traa":"‡§§‡•ç‡§∞‡§æ","tri":"‡§§‡•ç‡§∞‡§ø","tree":"‡§§‡•ç‡§∞‡•Ä","tru":"‡§§‡•ç‡§∞‡•Å","troo":"‡§§‡•ç‡§∞‡•Ç",
      "tre":"‡§§‡•ç‡§∞‡•á","trai":"‡§§‡•ç‡§∞‡•à","tro":"‡§§‡•ç‡§∞‡•ã",

      "gya":"‡§ú‡•ç‡§û","gyaa":"‡§ú‡•ç‡§û‡§æ","gyi":"‡§ú‡•ç‡§û‡§ø","gyee":"‡§ú‡•ç‡§û‡•Ä","gyu":"‡§ú‡•ç‡§û‡•Å","gyoo":"‡§ú‡•ç‡§û‡•Ç",
      "gye":"‡§ú‡•ç‡§û‡•á","gyai":"‡§ú‡•ç‡§û‡•à","gyo":"‡§ú‡•ç‡§û‡•ã"
    };

    const STANDALONE_VOWELS = {
      "a":"‡§Ö","aa":"‡§Ü","i":"‡§á","ee":"‡§à","u":"‡§â","oo":"‡§ä",
      "e":"‡§è","ai":"‡§ê","o":"‡§ì","au":"‡§î"
    };

    // Suggestion dictionary
    const SUGGEST_WORDS = [
      "mera","bharat","mahan","hai",
      "namaste","dhanyavaad","hindustan","rajasthan","sarkar","yojana",
      "pariksha","adhikari","chhatra","adhyapak","samay","mahine","varsh"
    ];

    // longest-match token
    function matchToken(str, i){
      let maxLen = Math.min(5, str.length - i);
      for(let len = maxLen; len > 0; len--){
        const sub = str.substr(i, len).toLowerCase();
        if(FULL_MAP[sub]) return { val: FULL_MAP[sub], len };
        if(STANDALONE_VOWELS[sub]) return { val: STANDALONE_VOWELS[sub], len };
      }
      return null;
    }

    function transliterateWord(word){
      let out = "";
      let i = 0;
      while(i < word.length){
        const m = matchToken(word, i);
        if(m){
          out += m.val;
          i += m.len;
        }else{
          out += word[i];
          i++;
        }
      }
      return out;
    }

    function convertToHindi(){
      const input = document.getElementById("englishInput").value;
      const parts = input.split(/(\s+)/);
      let result = "";
      parts.forEach(part => {
        if(part.trim() === ""){
          result += part;
        }else{
          result += transliterateWord(part);
        }
      });
      document.getElementById("hindiOutput").value = result;
    }

    // Suggestions logic
    let currentSuggestions = [];
    let activeIndex = -1;

    function getCurrentWordInfo(textarea){
      const pos = textarea.selectionStart;
      const value = textarea.value;
      let start = pos - 1;
      while(start >= 0 && !/\s/.test(value[start])) start--;
      start++;
      let end = pos;
      while(end < value.length && !/\s/.test(value[end])) end++;
      const word = value.substring(start, end);
      return { word, start, end, pos };
    }

    function showSuggestions(e){
      const ta = e.target;
      const info = getCurrentWordInfo(ta);
      const word = info.word.toLowerCase();
      const box = document.getElementById("suggestionsBox");

      box.innerHTML = "";
      box.style.display = "none";
      currentSuggestions = [];
      activeIndex = -1;

      if(!word || word.length < 2) return;

      const matches = SUGGEST_WORDS
        .filter(w => w.startsWith(word))
        .slice(0, 5);

      if(matches.length === 0) return;

      matches.forEach((m, idx) => {
        const div = document.createElement("div");
        div.className = "suggestion-item";
        div.textContent = m;
        div.addEventListener("mousedown", function(ev){
          ev.preventDefault();
          applySuggestion(m);
        });
        box.appendChild(div);
      });

      currentSuggestions = matches;
      box.style.display = "block";
    }

    function applySuggestion(newWord){
      const ta = document.getElementById("englishInput");
      const info = getCurrentWordInfo(ta);
      const value = ta.value;
      const before = value.substring(0, info.start);
      const after  = value.substring(info.end);

      ta.value = before + newWord + after;
      const newPos = before.length + newWord.length;
      ta.selectionStart = ta.selectionEnd = newPos;

      document.getElementById("suggestionsBox").style.display = "none";
      convertToHindi();
    }

    function handleSuggestionKeys(e){
      const box = document.getElementById("suggestionsBox");
      if(box.style.display === "none") return;

      const items = box.querySelectorAll(".suggestion-item");
      if(items.length === 0) return;

      if(e.key === "ArrowDown"){
        e.preventDefault();
        activeIndex = (activeIndex + 1) % items.length;
      }else if(e.key === "ArrowUp"){
        e.preventDefault();
        activeIndex = (activeIndex - 1 + items.length) % items.length;
      }else if(e.key === "Enter"){
        if(activeIndex >= 0){
          e.preventDefault();
          applySuggestion(currentSuggestions[activeIndex]);
          return;
        }
      }else if(e.key === "Escape"){
        box.style.display = "none";
        return;
      }else{
        return; // let normal typing happen
      }

      items.forEach(el => el.classList.remove("active"));
      if(activeIndex >= 0) items[activeIndex].classList.add("active");
    }

    function handleInput(e){
      convertToHindi();
      showSuggestions(e);
    }

    function copyHindi(){
      const out = document.getElementById("hindiOutput");
      out.select();
      document.execCommand("copy");
      alert("Hindi text copied!");
    }

    function clearText(){
      document.getElementById("englishInput").value = "";
      document.getElementById("hindiOutput").value = "";
      document.getElementById("suggestionsBox").style.display = "none";
    }
  </script>
</body>
</html>
